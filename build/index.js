(()=>{"use strict";const e=window.React,o=window.wp.hooks,t=window.wp.compose,r=window.wp.blockEditor,n=window.wp.components,l=window.wp.i18n;(0,o.addFilter)("blocks.registerBlockType","hm-query-loop/add-query-loop-attributes",function(e,o){return"core/query"!==o?e:{...e,attributes:{...e.attributes,hmQueryLoop:{type:"object",default:{}}},providesContext:{...e.providesContext||{},"hm-query-loop/settings":"hmQueryLoop"}}}),(0,o.addFilter)("blocks.registerBlockType","hm-query-loop/add-post-template-context",function(e,o){return"core/post-template"!==o?e:{...e,usesContext:[...e.usesContext||[],"hm-query-loop/settings"]}});const p=(0,t.createHigherOrderComponent)(o=>t=>{const{name:p,attributes:i,setAttributes:s}=t;if("core/query"!==p)return(0,e.createElement)(o,{...t});const{hmQueryLoop:a={},query:u={}}=i,{perPage:d,hideOnPaged:h,excludeDisplayed:c}=a,y=u.inherit||!1;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o,{...t}),(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Extra Query Loop Settings","hm-query-loop"),initialOpen:!1},y&&(0,e.createElement)(n.TextControl,{label:(0,l.__)("Posts per page (Override)","hm-query-loop"),help:(0,l.__)("Override the number of posts to show when inheriting the query. Leave empty to use the default.","hm-query-loop"),type:"number",value:null!=d?d:"",onChange:e=>{const o=""===e?void 0:parseInt(e,10);s({hmQueryLoop:{...a,perPage:o}})},min:1}),!y&&d&&(0,e.createElement)("p",{style:{fontSize:"12px",color:"#757575"}},(0,l.__)("Posts per page override is only available when inheriting the query.","hm-query-loop")),(0,e.createElement)(n.ToggleControl,{label:(0,l.__)("Hide on paginated pages","hm-query-loop"),help:(0,l.__)("Hide this query loop when viewing page 2 or higher.","hm-query-loop"),checked:h,onChange:e=>s({hmQueryLoop:{...a,hideOnPaged:e}})}),(0,e.createElement)(n.ToggleControl,{label:(0,l.__)("Exclude already displayed posts","hm-query-loop"),help:(0,l.__)("Exclude posts that have been displayed by previous query loops on this page.","hm-query-loop"),checked:c,onChange:e=>s({hmQueryLoop:{...a,excludeDisplayed:e}})}))))},"withInspectorControls");(0,o.addFilter)("editor.BlockEdit","hm-query-loop/with-inspector-controls",p),(0,o.addFilter)("blocks.getSaveContent.extraProps","hm-query-loop/add-save-props",function(e,o,t){return o.name,e})})();